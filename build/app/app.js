var app=angular.module("colorIpsum",["ngAnimate"]);app.controller("mainController",["$rootScope","$scope","coloripsum","$timeout",function(e,n,o,r){n.versionColor="#FE6F5E",n.version="2.0",e.scheme={main:"#000000",complementary:"#000000",dark:"#000000",light:"#000000",noHash:{main:"000000",complementary:"000000",dark:"000000",light:"000000"},luminocity:{main:1,complementary:1,dark:1,light:1},uiColors:{background:"#000000",hex:"#000000",texts:"#000000"}},n.rotate=!1;var t,a,i=function(){var t=null,e=window.location.pathname.split("/"),n=e[e.length-1];{var o;null!==n.match(/^(([a-fA-F0-9]){6})-(([a-fA-F0-9]){6})-(([a-fA-F0-9]){6})-(([a-fA-F0-9]){6})$/gi)&&(o=n.split("-"),t={main:"#"+o[0],complementary:"#"+o[1],dark:"#"+o[2],light:"#"+o[3],noHash:{main:o[0],complementary:o[1],dark:o[2],light:o[3]}})}return t}();e.scheme=null!==i?(t=i,u(a=o.generatePaletteFromURL(t),"Colors for devs"),a):c(),n.onKeyUp=function(t){32==t.keyCode&&(e.scheme=c())},n.generateRandom=function(t){n.rotate=!0,r(function(){n.rotate=!1},700),e.scheme=c()},n.generatePalette=function(t){return e=t,u(n=o.palette(e),"Colors for devs"),n;var e,n},n.buildInfo=function(){var t,e={mainHex:n.versionColor};n.versionScheme=(t=e,o.palette(t)),$("body").css("overflow","hidden"),$(".about").addClass("show")},n.closeAbout=function(t){"panel about show"===t.target.className&&($(".about").css("cursor","auto"),$("body").css("overflow","auto"),$(".about").removeClass("show"))},n.changeCursor=function(t){"panel about show"===t.target.className?$(".about").css("cursor","url(assets/images/close.gif), crosshair"):$(".about").css("cursor","auto")},n.selectHexString=function(t){var e,n,o=t.currentTarget.className,r=document.getElementsByClassName(o)[0];window.getSelection?(n=window.getSelection(),(e=document.createRange()).selectNodeContents(r),n.removeAllRanges(),n.addRange(e)):document.body.createTextRange&&((e=document.body.createTextRange()).moveToElementText(r),e.select())};var s=new ClipboardJS(".color");function c(){var t=o.random();return u(t,"Colors for devs"),t}function u(t,e){var n=window.location.pathname.split("/"),o="/"+n[n.length-1],r="/"+t.noHash.main+"-"+t.noHash.complementary+"-"+t.noHash.dark+"-"+t.noHash.light;r==o?history.replaceState({scheme:t},e):history.pushState({scheme:t},e,r)}s.on("success",function(t){var e=$(t.trigger).attr("class").replace(" color","");$("."+e+".hex .hint")[0]||$("."+e+".hex").append('<span class="hint">copied to clipboard</span>').show(function(){$(".hint").fadeOut(1e3,function(){$(this).remove()})})}),s.on("error",function(t){var e=$(t.trigger).attr("class").replace(" color","");$("."+e+".hex .hint")[0]||$("."+e+".hex").append('<span class="hint">ctrl+c to copy</span>').show(function(){$(".hint").fadeOut(1e3,function(){$(this).remove()})})}),window.onpopstate=function(t){null!==t.state&&n.$apply(function(){e.scheme=t.state.scheme})}}]),app.directive("spectrum",["$rootScope",function(r){return{restrict:"A",link:function(o,e,t){$(e).spectrum(o.$eval(t.spectrum)),$(e).on("show.spectrum",function(t){o.$apply(function(){o.confirmText="Select Color",o.showConfirm=!0}),$(".sp-slider").position().top<0&&$(".sp-slider").css({top:0}),$("body").css("overflow","hidden")}),$(e).on("hide.spectrum",function(t){o.$apply(function(){o.confirmText="",o.showConfirm=!1}),$("body").css("overflow","auto")}),$(e).on("reflow.spectrum",function(t){$(".sp-container").css({position:"fixed",left:0,top:0,bottom:0})}),$(e).on("dragstart.spectrum",function(t){$(".sp-sat-overlay").length||$(".sp-sat").prepend('<div class="sp-sat-overlay"></div>')}),$(e).on("change.spectrum",function(t,e){var n={mainHex:e.toHexString()};r.$apply(function(){r.scheme=o.generatePalette(n)})}),$(e).on("move.spectrum",function(t,e){$(".sp-sat-overlay").css({display:"block",background:e.toHexString()}),$(".sp-val").css({background:"none"}),$(".sp-slider").position().top<0&&$(".sp-slider").css({top:0})}),$(e).on("dragstop.spectrum",function(t){$(".sp-sat-overlay").css({display:"none"}),$(".sp-val").removeAttr("style")}),o.$watch("scheme",function(t){$(e).spectrum("set",t.main),$(".sp-preview").css({color:t.uiColors.texts}),$(".sp-preview").css({background:t.main})})}}}]),app.directive("setFocus",function(){return{restrict:"A",link:function(t,e,n){e[0].focus()}}}),app.directive("loadAsync",["$rootScope",function(t){return{restrict:"A",link:function(t,e,n){e[0].rel="stylesheet"}}}]),app.service("coloripsum",function(){function o(){return{main:"",complementary:"",dark:"",light:"",noHash:{main:"",complementary:"",dark:"",light:""},luminocity:{main:"",complementary:"",dark:"",light:""},uiColors:{background:"",hex:"",texts:""}}}var r=this;function a(t,e){var n,o,r,a,i,s;return c(t)<=.5?(a=t,i=e,(s={}).r=Math.round(2*a.r*i.r/255),s.g=Math.round(2*a.g*i.g/255),s.b=Math.round(2*a.b*i.b/255),s.a=i.a,u(s,a)):(n=t,o=e,(r={}).r=Math.round(255*(1-(1-n.r/255)*(1-(2*o.r/255-1)))),r.g=Math.round(255*(1-(1-n.g/255)*(1-(2*o.g/255-1)))),r.b=Math.round(255*(1-(1-n.b/255)*(1-(2*o.b/255-1)))),r.a=o.a,u(r,n))}function c(t){return(t.r+t.g+t.b)/3/255}function u(t,e){var n,o,r,a={};return a.r=(1-t.a)*e.r+t.a*t.r,a.g=(1-t.a)*e.g+t.a*t.g,a.b=(1-t.a)*e.b+t.a*t.b,n=a.r,o=a.g,r=a.b,"#"+l(n)+l(o)+l(r)}function i(t,e){return{r:parseInt(s(t).substring(0,2),16),g:parseInt(s(t).substring(2,4),16),b:parseInt(s(t).substring(4,6),16),a:e}}function s(t){return"#"==t.charAt(0)?t.substring(1,7):t}function l(t){return t=parseInt(t,10),isNaN(t)?"00":(t=Math.max(0,Math.min(t,255)),"0123456789ABCDEF".charAt((t-t%16)/16)+"0123456789ABCDEF".charAt(t%16))}function m(t){var e=Math.random(),n="#EEEEEE";t&&(n="#777777",e=-e);var o=parseInt(n.slice(1),16),r=e<0?0:255,a=e<0?-1*e:e,i=o>>16,s=o>>8&255,c=255&o;return"#"+(16777216+65536*(Math.round((r-i)*a)+i)+256*(Math.round((r-s)*a)+s)+(Math.round((r-c)*a)+c)).toString(16).slice(1)}function n(t,e,n){return u(i(t,e),i(n,1))}function p(t,e,n){var o=i(t,e);return a(i(n,1),o)}function h(t){return c(i(t,1))}function d(t){var e={};return e.background=n(t,.1,"#FFFFFF"),e.hex=n(t,.6,e.background),.85<h(e.background)&&.85<h(e.hex)&&(e.hex=n(e.hex,.9,"#424242")),e.texts=p(t,.2,"#424242"),e}function g(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}this.random=function(){var t=function(){var t="";for(;t.length<6;)t+=Math.random().toString(16).substr(-6).substr(-1);return"#"+t}(),e=m(!0),n=m(!1);return r.palette({mainHex:t,darkHex:e,lightHex:n})},this.palette=function(t){var e=g({mainHex:"#FFFFFF",darkHex:"#424242",lightHex:"#FAFAFA"},t),n=new o;return n.main=e.mainHex,n.noHash.main=s(n.main).toUpperCase(),n.luminocity.main=h(n.main),n.complementary=function(t){var e=(0+(16777215-(t=function(t){return parseInt(t.replace(/^#/,""),16)}(t))).toString(16)).slice(-6);for(;e.length<6;)e="0"+e;return"#"+e}(e.mainHex),n.noHash.complementary=s(n.complementary).toUpperCase(),n.luminocity.complementary=h(n.complementary),n.dark=p(e.mainHex,.2,e.darkHex),n.noHash.dark=s(n.dark).toUpperCase(),n.luminocity.dark=h(n.dark),n.light=p(e.mainHex,.2,e.lightHex),n.noHash.light=s(n.light).toUpperCase(),n.luminocity.light=h(n.light),n.uiColors=g(n.uiColors,d(n.main)),n},this.generatePaletteFromURL=function(t){var e=g(new o,t);return e.luminocity.main=h(e.main),e.luminocity.complementary=h(e.complementary),e.luminocity.dark=h(e.dark),e.luminocity.light=h(e.light),e.uiColors=g(e.uiColors,d(e.main)),e},this.hexToRGBA=i,this.rgbaToHex=u,this.hexOpacity=n,this.hexBlendOverlay=p,this.hexLuminocity=h});